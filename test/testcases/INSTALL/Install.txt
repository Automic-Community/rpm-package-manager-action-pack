*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Suite Setup
Force Tags        INSTALL    unix
Test Template     Install Template
Resource          ../../resources/keywords.txt

*** Test Cases ***    RPM FILE                                                   UPGRADE    FAIL IF INSTALLED INSTALL    PREFIX      RELOCATE    ALL FILES    EXCLUDE PATH        EXCLUDE DOCS    REPLACE FILES    REPLACE PACKAGES    REPLACE OLD PACAKGES    IGNORE DISK SIZE    IGNORE ARCHITECTURE    IGNORE OS TYPE    DB UPDATE ONLY    IGNORE DIGEST    IGNORE MANIFEST    IGNORE HEADER SIGNATURES    IGNORE DEPENDENCY CHECK    DON'T REORDER    NO SCRIPT EXECUTION    NO PRE-SCRIPT EXECUTION    NO POST-SCRIPT EXECUTION    NO PREUN-SCRIPT EXECUTION    NO POSTUN-SCRIPT EXECUTION    NO TRIGGER SCRIPT EXECUTION    NO TRIGGERIN SCRIPT EXECUTION    NO TRIGGERUN SCRIPT EXECUTION    NO TRIGGERPOSTUN SCRIPT EXECUTION    DONT INSTALL/UPGRADE, JUST TEST    DOWNLOAD VIA FTP PRIOR INSTALL/UPGRADE    DOWNLOAD VIA HTTP PRIOR INSTALL/UPGRADE    FTP/HTTP HOST         FTP/HTTP PORT    FTP USER    FTP PASSWORD    FTP PROXY HOST                           FTP PROXY PORT    HTTP PROXY HOST                          HTTP PROXY PORT    SUDO PASSWORD    RETURN CODE    RETURN STATUS
Install from local    ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install prefix        ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           prefix      ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install relocate      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    relocate    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install all files     ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    YES          ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install exclude path
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${/}exclude_path    NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install exclude docs
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            YES             NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install replace files
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              YES              NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install replace packages
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               YES                 NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install replace old packages
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  YES                     NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install ignore disk size
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      YES                 NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install ignore architecture
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  YES                    NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install ignore OS type
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     YES               NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install DB update only
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                YES               NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install ignore digest
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                YES              NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install ignore manifest
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               YES                NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install ignore header signatures
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 YES                         NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install ignore dependency check
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          YES                        NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install dont reorder
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         YES              NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install No script     ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               YES                    YES                        YES                         YES                          YES                           YES                            YES                              YES                              YES                                  NO                                 NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install dont install or upgrade just test
                      ${_WORKING_DIR}${/}${_SAMPLE_PACKAGE_FILE}                 NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   YES                                NO                                        NO                                         ${EMPTY}              ${EMPTY}         ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install from ftp      testcases${/}PCK.AUTOMIC_RPM${/}${_SAMPLE_PACKAGE_FILE}    NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 YES                                       NO                                         vvnsattfs01           21               ftptest     S3rv3r@Aut      ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install from ftp via proxy
                      testcases${/}PCK.AUTOMIC_RPM${/}${_SAMPLE_PACKAGE_FILE}    NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 YES                                       NO                                         vvnsattfs01           21               ftptest     S3rv3r@Aut      squid-user:ventum2011%40@172.16.36.18    3128              ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install from http     testcases${/}PCK.AUTOMIC_RPM${/}${_SAMPLE_PACKAGE_FILE}    NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        YES                                        172.16.36.7/public    80               ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          ${EMPTY}                                 ${EMPTY}           ${EMPTY}         0              ${ENDED_OK - ended normally}

Install from http via proxy
                      testcases${/}PCK.AUTOMIC_RPM${/}${_SAMPLE_PACKAGE_FILE}    NO         NO                           ${EMPTY}    ${EMPTY}    NO           ${EMPTY}            NO              NO               NO                  NO                      NO                  NO                     NO                NO                NO               NO                 NO                          NO                         NO               NO                     NO                         NO                          NO                           NO                            NO                             NO                               NO                               NO                                   NO                                 NO                                        YES                                        172.16.36.7/public    80               ${EMPTY}    ${EMPTY}        ${EMPTY}                                 ${EMPTY}          squid-user:ventum2011%40@172.16.36.18    3128               ${EMPTY}         0              ${ENDED_OK - ended normally}

*** Keywords ***
Install Template
    [Arguments]    ${rpm_file}    ${upgrade}    ${fail_if_installed_install}    ${prefix}    ${relocate}    ${all_files}
    ...    ${exclude_path}    ${exclude_docs}    ${replace_files}    ${replace_packages}    ${replace_old_pacakges}    ${ignore_disk_size}
    ...    ${ignore_architecture}    ${ignore_os_type}    ${db_update_only}    ${ignore_digest}    ${ignore_manifest}    ${ignore_header_signatures}
    ...    ${ignore_dependency_check}    ${dont_reorder}    ${no_script_execution}    ${no_pre-script_execution}    ${no_post-script_execution}    ${no_preun-script_execution}
    ...    ${no_postun-script_execution}    ${no_trigger_script_execution}    ${no_triggerin_script_execution}    ${no_triggerun_script_execution}    ${no_triggerpostun_script_execution}    ${dont_install_upgrade_just_test}
    ...    ${download_via_ftp_prior_install_upgrade}    ${download_via_http_prior_install_upgrade}    ${ftp_http_host}    ${ftp_http_port}    ${ftp_user}    ${ftp_password}
    ...    ${ftp_proxy_host}    ${ftp_proxy_port}    ${http_proxy_host}    ${http_proxy_port}    ${sudo_password}    ${returnCode}
    ...    ${returnStatus}
    Init Action    ${ACTION_REMOVE}
    Action Set    ${PRT_REMOVE_PACKAGE_NAME}    ${_SAMPLE_PACKAGE_NAME}
    Action Execute
    Init Action    ${ACTION_INSTALL}
    Action Set    ${PRT_INSTALL_RPM_FILE}    ${rpm_file}
    Action Set    ${PRT_INSTALL_RPM_UPGRADE}    ${upgrade}
    Action Set    ${PRT_INSTALL_RPM_FAIL_IF_INSTALLED}    ${fail_if_installed_install}
    Action Set    ${PRT_INSTALL_RPM_INSTALL_PREFIX}    ${prefix}
    Action Set    ${PRT_INSTALL_RPM_INSTALL_RELOCATE}    ${relocate}
    Action Set    ${PRT_INSTALL_RPM_ALL_FILES}    ${all_files}
    Action Set    ${PRT_INSTALL_RPM_EXCLUDE_PATH}    ${exclude_path}
    Action Set    ${PRT_INSTALL_RPM_EXCLUDE_DOCS}    ${exclude_docs}
    Action Set    ${PRT_INSTALL_RPM_REPLACE_FILES}    ${replace_files}
    Action Set    ${PRT_INSTALL_RPM_REPLACE_PACKAGES}    ${replace_packages}
    Action Set    ${PRT_INSTALL_RPM_REPLACE_OLD_PACKAGES}    ${replace_old_pacakges}
    Action Set    ${PRT_INSTALL_RPM_IGNORE_SPACE_CHECK}    ${ignore_disk_size}
    Action Set    ${PRT_INSTALL_RPM_IGNORE_ARCH_CHECK}    ${ignore_architecture}
    Action Set    ${PRT_INSTALL_RPM_IGNORE_OS_TYPE_CHECK}    ${ignore_os_type}
    Action Set    ${PRT_INSTALL_RPM_ONLY_DB_UPDATE}    ${db_update_only}
    Action Set    ${PRT_INSTALL_RPM_IGNORE_DIGEST}    ${ignore_digest}
    Action Set    ${PRT_INSTALL_RPM_IGNORE_MANIFEST}    ${ignore_manifest}
    Action Set    ${PRT_INSTALL_RPM_IGNORE_HDR_SIGN}    ${ignore_header_signatures}
    Action Set    ${PRT_INSTALL_RPM_IGNORE_DEP_CHECK}    ${ignore_dependency_check}
    Action Set    ${PRT_INSTALL_RPM_DONT_REORDER}    ${dont_reorder}
    Action Set    ${PRT_INSTALL_RPM_NO_SCRIPTS}    ${no_script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_PRE_SCRIPT}    ${no_pre-script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_POST_SCRIPT}    ${no_post-script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_PREUN_SCRIPT}    ${no_preun-script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_POSTUN_SCRIPT}    ${no_postun-script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_TRIGGERS}    ${no_trigger_script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_TRIGGER_IN}    ${no_triggerin_script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_TRIGGER_UN}    ${no_triggerun_script_execution}
    Action Set    ${PRT_INSTALL_RPM_NO_TRIGGER_POSTUN}    ${no_triggerpostun_script_execution}
    Action Set    ${PRT_INSTALL_RPM_TEST_ONLY}    ${dont_install_upgrade_just_test}
    Action Set    ${PRT_INSTALL_RPM_DOWNLOAD_VIA_FTP}    ${download_via_ftp_prior_install_upgrade}
    Action Set    ${PRT_INSTALL_RPM_DOWNLOAD_VIA_HTTP}    ${download_via_http_prior_install_upgrade}
    Action Set    ${PRT_INSTALL_RPM_DOWNLOAD_HOST}    ${ftp_http_host}
    Action Set    ${PRT_INSTALL_RPM_DOWNLOAD_PORT}    ${ftp_http_port}
    Action Set    ${PRT_INSTALL_RPM_DOWNLOAD_FTP_USER}    ${ftp_user}
    Action Set    ${PRT_INSTALL_RPM_DOWNLOAD_FTP_PWD}    ${ftp_password}
    Action Set    ${PRT_INSTALL_RPM_FTP_PROXY_HOST}    ${ftp_proxy_host}
    Action Set    ${PRT_INSTALL_RPM_FTP_PROXY_PORT}    ${ftp_proxy_port}
    Action Set    ${PRT_INSTALL_RPM_HTTP_PROXY_HOST}    ${http_proxy_host}
    Action Set    ${PRT_INSTALL_RPM_HTTP_PROXY_PORT}    ${http_proxy_port}
    Action Set    ${PRT_INSTALL_SUDO_PASSWORD}    ${sudo_password}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}
    Action Return Status Should Be    ${returnStatus}
